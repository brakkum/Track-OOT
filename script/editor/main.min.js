function convertOldLogic(e){var t={type:"or",el:[]};for(let c=0;c<e.length;++c){var a={type:"and",el:[]};for(let t=0;t<e[c].length;++t){var n={el:null},o=n,l=e[c][t];l.startsWith("!")&&(l=l.slice(1),o.el={type:"not",el:null},o=o.el);var[i,r]=l.split(":");r&&(o.el={type:"min",value:r,el:null},o=o.el),i=i.split("."),o.el={type:i[0].slice(0,-1),el:i[1]},a.el.push(n.el)}t.el.push(a)}return t}function exportLogic(){var e=document.getElementById("editor-panel").querySelector(".panel-header"),t=document.getElementById("output-panel").querySelector(".panel-body"),a={};a[e.getAttribute("data-cat")]={},a[e.getAttribute("data-cat")][e.getAttribute("data-id")]=getLogic(),t.innerHTML=JSON.stringify(a," ",4)}function setLogic(e){return removeLogicEl(document.getElementById("editor-panel").querySelector(CHILD_ITEM_QUERY)),recursiveSetLogic(e,document.getElementById("editor-panel").querySelector(".panel-body > .placeholder"))}function recursiveSetLogic(e,t){if(null!=e)switch(e.type){case"and":n=addLogicEl(document.getElementById("logic-and"),t).querySelector(".placeholder");for(let t=0;t<e.el.length;++t){(a=e.el[t])&&null!=a&&recursiveSetLogic(a,n)}break;case"or":n=addLogicEl(document.getElementById("logic-or"),t).querySelector(".placeholder");for(let t=0;t<e.el.length;++t){var a=e.el[t];a&&null!=a&&recursiveSetLogic(a,n)}break;case"not":n=addLogicEl(document.getElementById("logic-not"),t).querySelector(".placeholder");e.el&&null!=e.el&&recursiveSetLogic(e.el,n);break;case"equal":(n=addLogicEl(document.getElementById("logic-equal"),t)).querySelector("input").value=e.value,n=n.querySelector(".placeholder"),e.el&&null!=e.el&&recursiveSetLogic(e.el,n);break;case"value":case"min":(n=addLogicEl(document.getElementById("logic-min"),t)).querySelector("input").value=e.value,n=n.querySelector(".placeholder"),e.el&&null!=e.el&&recursiveSetLogic(e.el,n);break;case"mixin":e.el&&null!=e.el&&addLogicEl(document.getElementById("mixin_"+e.el),t);break;case"skip":if(e.el&&null!=e.el){n=addLogicEl(document.getElementById("skip_"+e.el),t);e.hasOwnProperty("value")&&(n.querySelector("select").value=e.value)}break;case"setting":case"option":if(e.el&&null!=e.el){var n=addLogicEl(document.getElementById("option_"+e.el),t);e.hasOwnProperty("value")&&(n.querySelector("select").value=e.value)}break;case"item":e.el&&null!=e.el&&addLogicEl(document.getElementById("item_"+e.el),t)}}function getLogic(){return recursiveGetLogic(document.getElementById("editor-panel").querySelector(CHILD_ITEM_QUERY))}function recursiveGetLogic(e){if(!e||null==e)return null;switch(e.getAttribute("data-id")){case null:case"":return null;case"logic-and":t={type:"and",el:[]};return(a=Array.from(e.querySelectorAll(CHILD_ITEM_QUERY_SCOPE))).forEach(e=>{t.el.push(recursiveGetLogic(e))}),t;case"logic-or":var t={type:"or",el:[]},a=Array.from(e.querySelectorAll(CHILD_ITEM_QUERY_SCOPE));return a.forEach(e=>{t.el.push(recursiveGetLogic(e))}),t;case"logic-not":return{type:"not",el:recursiveGetLogic(n=e.querySelector(CHILD_ITEM_QUERY_SCOPE))};case"logic-equal":return{type:"equal",el:recursiveGetLogic(n=e.querySelector(CHILD_ITEM_QUERY_SCOPE)),value:parseInt(e.querySelector("input").value)};case"logic-min":var n=e.querySelector(CHILD_ITEM_QUERY_SCOPE);return{type:"min",el:recursiveGetLogic(n),value:parseInt(e.querySelector("input").value)};default:return e.classList.contains("logic-mixin")?{type:"mixin",el:e.getAttribute("data-id").slice(6)}:e.classList.contains("logic-option")?e.classList.contains("logic-choice")?{type:"option",el:e.getAttribute("data-id").slice(7),value:e.querySelector("select").value}:{type:"option",el:e.getAttribute("data-id").slice(7)}:e.classList.contains("logic-skip")?e.classList.contains("logic-choice")?{type:"skip",el:e.getAttribute("data-id").slice(5),value:e.querySelector("select").value}:{type:"skip",el:e.getAttribute("data-id").slice(5)}:e.classList.contains("logic-item")?{type:"item",el:e.getAttribute("data-id").slice(5)}:null}}function moveLogicEl(e,t,a){var n=t.parentElement;if(a)e=cloneLogicEl(e);else{var o=e.parentElement;o.classList.contains("multiple-children")||(o.querySelector(":scope > .placeholder").style.display="")}return n.insertBefore(e,t),n.classList.contains("multiple-children")||(t.style.display="none"),e}function cloneLogicEl(e){var t=e.cloneNode();if(!t.nodeName.startsWith("#")){t.classList.contains("logic-operator")?(t.id="logic_onboard_"+ID_CNT++,t.ondragstart=dragNewElement,t.onmouseover=elementMouseOver,t.onmouseout=elementMouseOut,t.ondragover=elementMouseOver):t.classList.contains("logic-element")?(t.id="logic_onboard_"+ID_CNT++,t.ondragstart=dragNewElement):t.classList.contains("placeholder")?(t.ondrop=dropOnPlaceholder,t.ondragover=allowDrop):"INPUT"!=t.tagName&&"SELECT"!=t.tagName||(t.onchange=exportLogic);var a=Array.from(e.childNodes);if(a)for(let e in a)t.appendChild(cloneLogicEl(a[e]));"SELECT"==t.tagName&&(t.value=e.value)}return t}function addLogicEl(e,t){(e=e.cloneNode(!0)).setAttribute("data-id",e.id),e.id="logic_onboard_"+ID_CNT++,e.ondragstart=dragNewElement;var a=t.parentElement,n=e.querySelector(".placeholder");n&&(n.ondrop=dropOnPlaceholder,n.ondragover=allowDrop),a.classList.contains("multiple-children")||(t.style.display="none"),e.classList.contains("logic-operator")&&(e.onmouseover=elementMouseOver,e.onmouseout=elementMouseOut,e.ondragover=elementMouseOver);var o=e.querySelector("input, select");return o&&(o.onchange=exportLogic,o.removeAttribute("disabled")),a.insertBefore(e,t),e}function removeLogicEl(e){if(e&&null!=e){if(e.id.startsWith("logic_onboard_")){var t=e.parentElement;t.removeChild(e),t.classList.contains("multiple-children")||(t.querySelector(".placeholder").style.display="")}return e}}async function loadAll(){var e=await FileLoader.loadAllJSON(["database/items.json","database/chests.json","database/dungeons.json","database/skulltulas.json","database/logic.json","database/rom_options.json","database/lang_en.json"]),t={};return t.items=e.shift(),t.chests=e.shift(),t.dungeons=e.shift(),t.skulltulas=e.shift(),t.logic=e.shift(),t.logic_patched=Storage.get("settings","logic",{}),t.rom_options=e.shift(),t.lang=e.shift(),t}function createListItem(e,t){var a=document.createElement("div");return a.className="list-item",a.innerHTML=translate(t),a.id=e+"_"+t,a.setAttribute("title",t),a.onclick=new Function("loadLogic('"+e+"', '"+t+"')"),data.logic_patched.hasOwnProperty(e)&&data.logic_patched[e].hasOwnProperty(t)&&a.classList.add("has-custom-logic"),a}function createElement(e,t){var a=document.createElement("div");return a.className="logic-element logic-"+e,a.id=e+"_"+t,a.innerHTML=translate(t),a.setAttribute("title",t),a.setAttribute("draggable",!0),a.ondragstart=dragNewElement,a}function createOption(e,t,a){var n=createElement(e,t);if("choice"==a.type){n.classList.add("logic-choice");var o=document.createElement("select");o.setAttribute("disabled","true");for(let e in a.values){var l=document.createElement("option");l.innerHTML=translate(a.values[e]),l.setAttribute("value",a.values[e]),o.appendChild(l)}o.value=a.default,n.appendChild(o)}return n}function createPanel(e,t){var a=document.createElement("div");a.className="panel panel-group collapsible";var n=document.createElement("div");n.className="panel-header",n.innerHTML=e,n.onclick=function(e){e.currentTarget.parentElement.classList.toggle("expanded")},a.appendChild(n);var o=document.createElement("div");return o.className="panel-body",a.appendChild(o),t.appendChild(a),o}async function createMixin(e){var t=await Dialog.prompt("New mixin","Please enter a new name!");if(!1!==t){if(""==t)return await Dialog.alert("Warning","The name can not be empty."),void state_New();if(t=t.toLowerCase().replace(/ /g,"_"),data.logic.mixins.hasOwnProperty(t))return await Dialog.alert("Warning","The name already exists."),void state_New();data.logic.mixins[t]=null;var a=document.createElement("div");a.className="list-item",a.innerHTML=translate(t),a.id="mixins_"+t,a.setAttribute("title",t),a.onclick=new Function("loadLogic('mixins', '"+t+"')"),a.classList.add("has-new-logic"),mixins_panel.insertBefore(a,create_mixin_button),mixin_panel.appendChild(createElement("mixin",t))}}function fillEditor(){chest_panel=createPanel("Chests - Reachable Logic",logics_panel),skulltula_panel=createPanel("Skulltulas - Reachable Logic",logics_panel),mixins_panel=createPanel("Mixins",logics_panel),item_panel=createPanel("Items",elements_panel),skips_panel=createPanel("Skips",elements_panel),options_panel=createPanel("Options",elements_panel),mixin_panel=createPanel("Mixins",elements_panel),document.getElementById("operator-panel").querySelector(".panel-header").onclick=function(e){e.currentTarget.parentElement.classList.toggle("expanded")};var e=createPanel("Overworld",chest_panel);for(let t in data.chests)e.appendChild(createListItem("chests",t));data.chests&&Object.keys(data.chests).length||(e.innerHTML="<i>No Elements</i>");var t=createPanel("Overworld",skulltula_panel);for(let e in data.skulltulas)t.appendChild(createListItem("skulltulas",e));data.skulltulas&&Object.keys(data.skulltulas).length||(t.innerHTML="<i>No Elements</i>");for(let e in data.dungeons){var a=data.dungeons[e].chests,n=data.dungeons[e].skulltulas,o=createPanel(translate(e),chest_panel),l=createPanel(translate(e),skulltula_panel);for(let e in a){d=createListItem("chests",e);o.appendChild(d)}a&&Object.keys(a).length||(o.innerHTML="<i>No Elements</i>");for(let e in n){d=createListItem("skulltulas",e);l.appendChild(d)}if(n&&Object.keys(n).length||(l.innerHTML="<i>No Elements</i>"),data.dungeons[e].hasmq){var i=data.dungeons[e].chests_mq,r=data.dungeons[e].skulltulas_mq,c=createPanel(translate(e)+" (MQ)",chest_panel),s=createPanel(translate(e)+" (MQ)",skulltula_panel);for(let e in i){d=createListItem("chests",e);c.appendChild(d)}i&&Object.keys(i).length||(c.innerHTML="<i>No Elements</i>");for(let e in r){d=createListItem("skulltulas",e);s.appendChild(d)}r&&Object.keys(r).length||(s.innerHTML="<i>No Elements</i>")}}data.dungeons&&Object.keys(data.dungeons).length||(dungeon_panel.innerHTML="<i>No Elements</i>");for(let e in data.logic.mixins)mixins_panel.appendChild(createListItem("mixins",e)),mixin_panel.appendChild(createElement("mixin",e));(create_mixin_button=document.createElement("div")).className="list-item",create_mixin_button.innerHTML="NEW MIXIN",create_mixin_button.onclick=createMixin,mixins_panel.appendChild(create_mixin_button);for(let e in data.logic_patched.mixins)if(void 0===data.logic.mixins[e]){var d;(d=document.createElement("div")).className="list-item",d.innerHTML=translate(e),d.id="mixins_"+e,d.setAttribute("title",e),d.onclick=new Function("loadLogic('mixins', '"+e+"')"),d.classList.add("has-new-logic"),mixins_panel.insertBefore(d,create_mixin_button),mixin_panel.appendChild(createElement("mixin",e))}for(let e of Object.keys(data.items).sort())item_panel.appendChild(createElement("item",e));for(let e in data.rom_options.options)options_panel.appendChild(createOption("option",e,data.rom_options.options[e]));for(let e in data.rom_options.skips)skips_panel.appendChild(createOption("skip",e,data.rom_options.skips[e]))}async function loadLogic(e,t){var a=document.getElementById("editor-panel").querySelector(".panel-header");a.getAttribute("data-cat")&&document.getElementById(a.getAttribute("data-cat")+"_"+a.getAttribute("data-id")).classList.remove("active"),a.setAttribute("data-cat",e),a.setAttribute("data-id",t);var n=null;data.logic_patched.hasOwnProperty(e)&&data.logic_patched[e].hasOwnProperty(t)?(n=data.logic_patched[e][t],a.innerHTML=translate(t)+" (local)"):(n=data.logic[e][t],a.innerHTML=translate(t)+" (remote)",Array.isArray(n)&&(n=convertOldLogic(n))),document.getElementById(e+"_"+t).classList.add("active"),setLogic(n),exportLogic()}async function loadRemoteLogic(){var e=document.getElementById("editor-panel").querySelector(".panel-header"),t=e.getAttribute("data-cat"),a=e.getAttribute("data-id");if(t&&a){var n=data.logic[t][a];e.innerHTML=translate(a)+" (remote)",Array.isArray(n)&&(n=convertOldLogic(n)),setLogic(n),exportLogic()}}async function loadLocalLogic(){var e=document.getElementById("editor-panel").querySelector(".panel-header"),t=e.getAttribute("data-cat"),a=e.getAttribute("data-id");if(t&&a){var n=null;data.logic_patched.hasOwnProperty(t)&&data.logic_patched[t].hasOwnProperty(a)&&(n=data.logic_patched[t][a]),e.innerHTML=translate(a)+" (local)",setLogic(n),exportLogic()}}async function saveLocalLogic(){var e=document.getElementById("editor-panel").querySelector(".panel-header"),t=e.getAttribute("data-cat"),a=e.getAttribute("data-id");t&&a&&(data.logic_patched[t]=data.logic_patched[t]||{},data.logic_patched[t][a]=getLogic(),document.getElementById(t+"_"+a).classList.add("has-custom-logic"),Storage.set("settings","logic",data.logic_patched),e.innerHTML=translate(a)+" (local)",await Dialog.alert("Success",'Logic "'+translate(a)+'" saved.'))}async function removeLocalLogic(){var e=document.getElementById("editor-panel").querySelector(".panel-header"),t=e.getAttribute("data-cat"),a=e.getAttribute("data-id");t&&a&&data.logic_patched.hasOwnProperty(t)&&data.logic_patched[t].hasOwnProperty(a)&&await Dialog.confirm("Warning",'Do you really want to remove "'+translate(a)+'"?')&&(delete data.logic_patched[t][a],Storage.set("settings","logic",data.logic_patched),document.getElementById(t+"_"+a).classList.remove("has-custom-logic"),loadRemoteLogic(),await Dialog.alert("Success",'Logic "'+translate(a)+'" removed.'))}async function clearLocalLogic(){if(await Dialog.confirm("Warning","Do you really want to remove all local logic?")){for(let e in data.logic_patched)for(let t in data.logic_patched[e])document.getElementById(e+"_"+t).classList.remove("has-custom-logic");data.logic_patched={},Storage.set("settings","logic",data.logic_patched),loadRemoteLogic(),await Dialog.alert("Success","Local logic removed.")}}async function downloadLogicPatch(){FileSystem.save(JSON.stringify(data.logic_patched," ",4),"logic_patch_"+Date.now()+".json")}async function uploadLogicPatch(){FileSystem.load().then(function(e){e.startsWith("data:application/json;base64,")&&(e=e.slice(29));var t=JSON.parse(atob(e));for(let e in t){data.logic_patched[e]=data.logic_patched[e]||{};for(let n in t[e])if(data.logic_patched[e][n]=t[e][n],"mixins"!=e||data.logic.mixins.hasOwnProperty(n))document.getElementById(e+"_"+n).classList.add("has-custom-logic");else{data.logic.mixins[n]=null;var a=document.createElement("div");a.className="list-item",a.innerHTML=translate(n),a.id="mixins_"+n,a.setAttribute("title",n),a.onclick=new Function("loadLogic('mixins', '"+n+"')"),a.classList.add("has-new-logic"),mixins_panel.insertBefore(a,create_mixin_button),mixin_panel.appendChild(createElement("mixin",n))}}Storage.set("settings","logic",data.logic_patched)})}async function downloadPatchedLogic(){var e=JSON.parse(JSON.stringify(data.logic));for(let t in data.logic_patched){e[t]=e[t]||{};for(let a in data.logic_patched[t])e[t][a]=data.logic_patched[t][a]}FileSystem.save(JSON.stringify(e," ",4),"logic.json")}function debug(){document.getElementById("editor-frame").classList.toggle("debug-mode")}async function run(){window.data=await loadAll(),window.oncontextmenu=function(e){return e.preventDefault(),!1},fillEditor(),document.getElementById("control-save-local").onclick=saveLocalLogic,document.getElementById("control-load-local").onclick=loadLocalLogic,document.getElementById("control-remove-local").onclick=removeLocalLogic,document.getElementById("control-clear-local").onclick=clearLocalLogic,document.getElementById("control-download-patch").onclick=downloadLogicPatch,document.getElementById("control-upload-patch").onclick=uploadLogicPatch,document.getElementById("control-download-patched").onclick=downloadPatchedLogic,document.getElementById("control-load-remote").onclick=loadRemoteLogic}function translate(e){return data.lang[e]?data.lang[e]:e.replace(/\_/g," ")}function allowDrop(e){e.preventDefault(),e.stopPropagation()}function dragNewElement(e){e.dataTransfer.setData("text",e.target.id)}function dropOnPlaceholder(e){if(e.preventDefault(),e.stopPropagation(),e.dataTransfer){var t=e.dataTransfer.getData("text"),a=document.getElementById(t);a&&(t.startsWith("logic_onboard_")?moveLogicEl(a,e.target,e.ctrlKey):addLogicEl(a,e.target),exportLogic())}}function deleteElement(e){removeLogicEl(document.getElementById(e.dataTransfer.getData("text"))),exportLogic(),e.preventDefault(),e.stopPropagation()}function elementMouseOver(e){var t=document.querySelector(".logic-operator.hover");t&&t.classList.remove("hover"),e.currentTarget.classList.add("hover"),e.stopPropagation()}function elementMouseOut(e){e.currentTarget.classList.contains("hover")&&(e.currentTarget.classList.remove("hover"),e.stopPropagation())}window.FileSystem=new function(){var e=document.createElement("a");e.style="display: none";var t=document.createElement("input");t.setAttribute("type","file"),t.style="display: none",this.load=function(){return new Promise(function(e,a){t.onchange=function(){var t=this.files[0],n=new FileReader;n.onload=function(t){e(t.target.result)},n.onabort=e,n.onerror=a,n.readAsDataURL(t)},t.onerror=a,t.click()})},this.save=function(t,a){var n=window.URL.createObjectURL(new Blob([t],{type:"octet/stream"}));e.href=n,e.download=a,document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(n),document.body.removeChild(e)}},window.FileLoader=new function(){var e=0,t=0;this.onupdate=null,this.addFont=function(a,n,o="normal",l=400){e++,"function"==typeof this.onupdate&&this.onupdate(e,t);var i=new FontFace(a,"url("+n+")",{style:o,weight:l});return document.fonts.add(i),i.loaded.then(function(a){return t++,"function"==typeof this.onupdate&&this.onupdate(e,t),a}.bind(this))},this.loadText=function(a){return e++,"function"==typeof this.onupdate&&this.onupdate(e,t),fetch(new Request(a,{method:"GET",headers:new Headers({"Content-Type":"text/plain",Pragma:"no-cache","Cache-Control":"no-cache"}),mode:"cors",cache:"default"})).then(function(a){return t++,"function"==typeof this.onupdate&&this.onupdate(e,t),a.text()}.bind(this))},this.loadAllText=function(e){var t=[];for(let a in e)t.push(this.loadText(e[a]));return Promise.all(t)},this.loadJSON=function(a){return e++,"function"==typeof this.onupdate&&this.onupdate(e,t),fetch(new Request(a,{method:"GET",headers:new Headers({"Content-Type":"application/json",Pragma:"no-cache","Cache-Control":"no-cache"}),mode:"cors",cache:"default"})).then(function(a){return t++,"function"==typeof this.onupdate&&this.onupdate(e,t),a.json()}.bind(this))},this.loadAllJSON=function(e){var t=[];for(let a in e)t.push(this.loadJSON(e[a]));return Promise.all(t)}},window.Storage=new function(){this.set=function(e,t,a){localStorage.setItem(e+"\0"+t,JSON.stringify(a))},this.get=function(e,t,a=null){try{var n=localStorage.getItem(e+"\0"+t);return n&&null!=n?JSON.parse(n):a}catch(e){return a}},this.has=function(e,t){return localStorage.hasOwnProperty(e+"\0"+t)},this.remove=function(e,t){localStorage.removeItem(e+"\0"+t)},this.categories=function(){var e=Object.keys(localStorage);return Array.from(new Set(e.map(function(e){return e.split("\0")[0]})))},this.names=function(e){var t=Object.keys(localStorage);return Array.from(new Set(t.filter(function(t){return t.startsWith(e+"\0")}).map(function(e){return e.split("\0")[1]})))}},function(){function e(){var e="dialog_"+ ++a,t={container:document.createElement("DIV"),window:document.createElement("DIV"),focusCT:document.createElement("DIV"),focusCB:document.createElement("DIV"),title:document.createElement("DIV"),text:document.createElement("DIV"),body:document.createElement("DIV"),footer:document.createElement("DIV"),submit:document.createElement("BUTTON"),abort:document.createElement("BUTTON"),close:document.createElement("button")};return t.close.className="dialog-close",t.close.setAttribute("title","close"),t.submit.className="hidden",t.submit.setAttribute("type","submit"),t.abort.className="hidden",t.abort.setAttribute("type","reset"),t.title.id=e+"_title",t.title.className="dialog-title hidden",t.text.id=e+"_text",t.text.className="dialog-text hidden",t.body.className="dialog-body",t.body.appendChild(t.text),t.footer.className="dialog-footer",t.footer.appendChild(t.submit),t.footer.appendChild(t.abort),t.focusCT.setAttribute("tabindex","0"),t.focusCB.setAttribute("tabindex","0"),t.window.className="dialog-window",t.window.id=e,t.window.setAttribute("role","dialog"),t.window.setAttribute("aria-modal","true"),t.window.appendChild(t.title),t.window.appendChild(t.body),t.window.appendChild(t.footer),t.window.appendChild(t.close),t.container.className="dialog",t.container.appendChild(t.focusCT),t.container.appendChild(t.window),t.container.appendChild(t.focusCB),t}const t=['button:not([tabindex="-1"])','[href]:not([tabindex="-1"])','input:not([tabindex="-1"])','select:not([tabindex="-1"])','textarea:not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])'].join(",");var a=0;window.Dialog=function(a,n){function o(e){"function"==typeof a&&a(!!e),document.body.removeChild(l.container),n&&n.focus()}var l=e(),i=[];l.focusCT.onfocus=function(){i.length&&i[i.length-1].focus()},l.focusCB.onfocus=function(){i.length&&i[0].focus()},l.container.onkeydown=function(e){27==(e.which||e.keyCode)&&o(),e.stopPropagation()},l.submit.onclick=function(){o(!0)},l.abort.onclick=function(){o()},l.close.onclick=function(){o()},this.setTitle=function(e){return void 0===e?(l.title.classList.add("hidden"),target.removeAttribute("aria-labelledby")):(l.title.classList.remove("hidden"),l.title.innerHTML=e,l.window.setAttribute("aria-labelledby",l.title.id)),this},this.setText=function(e){return void 0===e?(l.text.classList.add("hidden"),target.removeAttribute("aria-describedby")):(l.text.classList.remove("hidden"),l.text.innerHTML=e,l.window.setAttribute("aria-describedby",l.text.id)),this},this.setSubmitText=function(e){return l.submit.classList.remove("hidden"),l.submit.innerHTML=e.toUpperCase(),l.submit.setAttribute("title",e),(i=Array.from(l.window.querySelectorAll(t)))[0].focus(),this},this.setAbortText=function(e){return l.abort.classList.remove("hidden"),l.abort.innerHTML=e.toUpperCase(),l.abort.setAttribute("title",e),(i=Array.from(l.window.querySelectorAll(t)))[0].focus(),this},this.setCloseText=function(e){return l.close.setAttribute("title",e),tab_btns.push(l.close),this},this.addElement=function(e){return l.body.appendChild(e),(i=Array.from(l.window.querySelectorAll(t)))[0].focus(),this},(i=Array.from(l.window.querySelectorAll(t)))[0].focus(),document.body.appendChild(l.container)},Dialog.alert=function(e,t,a){return new Promise(function(n){new Dialog(n,a).setTitle(e).setText(t).setSubmitText("OK")})},Dialog.confirm=function(e,t,a){return new Promise(function(n){new Dialog(n,a).setTitle(e).setText(t).setSubmitText("YES").setAbortText("NO")})},Dialog.prompt=function(e,t,a){return new Promise(function(n){var o=document.createElement("input");o.className="dialog-input",new Dialog(function(e){n(!!e&&o.value)},a).setTitle(e).setText(t).setSubmitText("SUBMIT").setAbortText("CANCEL").addElement(o)})}}();var chest_panel,chest_mq_panel,skulltula_panel,skulltula_mq_panel,dungeon_panel,mixins_panel,item_panel,skips_panel,options_panel,mixin_panel,create_mixin_button,ID_CNT=0;const CHILD_ITEM_QUERY=".panel-body > "+[".logic-operator",".logic-element"].join(", .panel-body > "),CHILD_ITEM_QUERY_SCOPE=":scope > "+[".logic-operator",".logic-element"].join(", :scope > ");var logics_panel=document.getElementById("logics-panel").querySelector(".panel-body"),elements_panel=document.getElementById("elements-panel").querySelector(".panel-body");run(),Array.from(document.getElementsByClassName("logic-operator")).forEach(e=>{e.ondragstart=dragNewElement});